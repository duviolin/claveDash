---
description: Padrões de tipos e constantes compartilhadas
globs: ["src/types/**", "src/lib/**"]
alwaysApply: false
---

# Types e Constants - Padrões CORRETOS

## Types (`types/index.ts`)

- TODOS os tipos compartilhados vivem em `src/types/index.ts` (arquivo único)
- `type` para unions/enums: `type UserRole = 'ADMIN' | 'TEACHER' | 'STUDENT' | 'DIRECTOR'`
- `interface` para objetos: `interface User { id: string; name: string; ... }`
- `PaginatedResponse<T>` genérico para respostas paginadas: `{ data: T[]; pagination: { page, limit, total, totalPages } }`
- `DeactivationErrorDetails` para response 409: `{ childResource: string; count?: number; names?: string[]; studentsCount?: number; teachersCount?: number }`
- Datas como `string` (ISO) no frontend (backend envia Date, Axios serializa)
- SEMPRE que criar/alterar entidade no backend, atualizar o tipo correspondente aqui
- NUNCA duplicar tipos (importar de `@/types`)

### Type aliases existentes
`UserRole`, `UserStatus`, `CourseType`, `SeasonStatus`, `ProjectType`, `ProjectStatus`, `TrackSceneStatus`, `TrackMaterialType`, `DailyMissionTemplateStatus`, `SubmissionStatus`

### Interfaces existentes (entidades)
`AuthUser`, `User`, `School`, `Course`, `Season`, `Class`, `ProjectTemplate`, `TrackSceneTemplate`, `TrackMaterialTemplate`, `StudyTrackTemplate`, `PressQuizTemplate`, `DailyMissionTemplate`, `DailyMissionQuiz`, `Project`, `StudentProfile`, `TeacherProfile`, `Notification`

### Interfaces utilitárias
`PaginatedResponse<T>`, `DeactivationErrorDetails`, `QuizQuestion`, `StorageConfig`, `PresignUploadResponse`, `MeResponse`, `ApiError`

## Constants (`lib/constants.ts`)

- Labels: `Record<XType, string>` (ex: `ROLE_LABELS`, `USER_STATUS_LABELS`)
- Badge variants: `Record<XType, BadgeVariant>` (ex: `ROLE_BADGE_VARIANT`, `SEASON_STATUS_VARIANT`)
- Options para Select: `Object.entries(LABELS).map(([value, label]) => ({ value, label }))`
- SEMPRE adicionar labels/variants ao criar novo status ou enum
- NUNCA hardcodar labels em páginas/componentes

## Utils (`lib/utils.ts`)

- `cn(...classes)`: clsx + tailwind-merge (SEMPRE usar para compor classes)
- `formatDate(iso)`: formato pt-BR curto
- `formatDateTime(iso)`: formato pt-BR com hora
- `getInitials(name)`: iniciais para avatares

## Error Codes (`lib/errorCodes.ts`)

- `ERROR_HANDLERS: Record<string, { message, action? }>` consumido pelo interceptor Axios
- Ao criar novo código de erro no backend, adicionar handler aqui
- `CONFLICT_INVALID_STATE`: handler sem message (details são tratados localmente no onError da mutation)
