---
description: Padroes de componentes UI e layout
globs: ["src/components/**"]
alwaysApply: false
---

# Components - Padroes CORRETOS

## UI Components (`components/ui/`)

- Props: `interface XProps` no mesmo arquivo; estender HTML attrs quando fizer sentido (`ButtonHTMLAttributes`, etc.)
- Form controls (`Input`, `Select`, `Textarea`, `PasswordInput`): usar `forwardRef` + `displayName`
- Variantes: `Record<Variant, string>` + `cn(base, variantStyles[variant], className)`
- SEMPRE aceitar `className?` para composicao
- NUNCA usar estado interno para logica de negocio (componentes UI sao burros)

### Catalogo de componentes UI
- **Layout**: Button, Badge, Tabs, Pagination, EmptyState, Skeleton
- **Form**: Input, Select, Textarea, PasswordInput
- **Overlay**: Modal (inclui `ConfirmModal` exportado do mesmo arquivo), DeactivationBlockedModal
- **Data**: Table
- **AI**: AIButton (botao com loading para chamadas de IA)
  - Props: `onGenerate: (userExtra?: string) => Promise<string>`, `onAccept`, `label?`, `extraInputLabel?`, `extraInputPlaceholder?`
  - Quando `extraInputLabel` definido, exibe textarea para instrucoes extras do usuario

## Layout Components (`components/layout/`)

- `PageContainer`: wrapper padrao de paginas (title, count?, action?)
- `AppLayout`: guard de auth + Sidebar + Header + Outlet
- NUNCA acessar API direto no layout (exceto AuthContext e NotificationBell)

## Padrao de Badge com status

```tsx
<Badge variant={STATUS_VARIANT[item.status]}>{STATUS_LABELS[item.status]}</Badge>
```

Labels e variants centralizados em `@/lib/constants.ts`, NUNCA inline.

## DeactivationBlockedModal

Componente reutilizavel para exibir mensagem quando soft delete eh bloqueado por filhos ativos.
- Props: `isOpen`, `onClose`, `entityName`, `parentId`, `details: DeactivationErrorDetails`
- Mapa `CHILD_NAV` converte `childResource` em label + URL para navegacao
- SEMPRE adicionar novos `childResource` ao `CHILD_NAV` quando criar nova verificacao no backend

### CHILD_NAV entries (16 resources mapeados)
- `schools`, `courses`, `seasons`, `classes`, `students`, `teachers`, `members`
- `projectTemplates`, `trackSceneTemplates`, `trackMaterialTemplates`
- `studyTrackCategories`, `studyTrackTemplates`
- `pressQuizTemplates`, `dailyMissionTemplates`, `dailyMissionQuizzes`
- `projects` (instancias)

## ANTI-PATTERNS

- NAO criar componentes com logica de negocio em `ui/`
- NAO usar `style={{}}` inline (usar Tailwind)
- NAO duplicar classes Tailwind entre componentes (extrair para `cn()` ou variante)
