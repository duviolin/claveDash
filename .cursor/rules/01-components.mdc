---
description: Padrões de componentes UI e layout
globs: ["src/components/**"]
alwaysApply: false
---

# Components - Padrões CORRETOS

## UI Components (`components/ui/`)

- Props: `interface XProps` no mesmo arquivo; estender HTML attrs quando fizer sentido (`ButtonHTMLAttributes`, etc.)
- Form controls (`Input`, `Select`, `Textarea`, `PasswordInput`): usar `forwardRef` + `displayName`
- Variantes: `Record<Variant, string>` + `cn(base, variantStyles[variant], className)`
- SEMPRE aceitar `className?` para composição
- NUNCA usar estado interno para lógica de negócio (componentes UI são burros)

### Catálogo de componentes UI
- **Layout**: Button, Badge, Tabs, Pagination, EmptyState, Skeleton
- **Form**: Input, Select, Textarea, PasswordInput
- **Overlay**: Modal (inclui `ConfirmModal` exportado do mesmo arquivo), DeactivationBlockedModal
- **Data**: Table
- **AI**: AIButton (botão com loading para chamadas de IA)
  - Props: `onGenerate: (userExtra?: string) => Promise<string>`, `onAccept`, `label?`, `extraInputLabel?`, `extraInputPlaceholder?`
  - Quando `extraInputLabel` estiver definido, exibe textarea para instruções extras do usuário

## Layout Components (`components/layout/`)

- `PageContainer`: wrapper padrão de páginas (title, count?, action?)
- `AppLayout`: guard de auth + Sidebar + Header + Outlet
- NUNCA acessar API direto no layout (exceto AuthContext e NotificationBell)

## Padrão de Badge com status

```tsx
<Badge variant={STATUS_VARIANT[item.status]}>{STATUS_LABELS[item.status]}</Badge>
```

Labels e variants centralizados em `@/lib/constants.ts`, NUNCA inline.

## DeactivationBlockedModal

Componente reutilizável para exibir mensagem quando soft delete é bloqueado por filhos ativos.
- Props: `isOpen`, `onClose`, `entityName`, `parentId`, `details: DeactivationErrorDetails`
- Mapa `CHILD_NAV` converte `childResource` em label + URL para navegação
- SEMPRE adicionar novos `childResource` ao `CHILD_NAV` quando criar nova verificação no backend

### CHILD_NAV entries (15 resources mapeados)
- `schools`, `courses`, `seasons`, `classes`, `students`, `teachers`, `members`
- `projectTemplates`, `trackSceneTemplates`, `trackMaterialTemplates`
- `studyTrackTemplates`
- `pressQuizTemplates`, `dailyMissionTemplates`, `dailyMissionQuizzes`
- `projects` (instâncias)

## ANTI-PATTERNS

- NÃO criar componentes com lógica de negócio em `ui/`
- NAO usar `style={{}}` inline (usar Tailwind)
- NAO duplicar classes Tailwind entre componentes (extrair para `cn()` ou variante)
